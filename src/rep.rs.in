
#[derive(Debug, Default, Serialize)]
pub struct Response {
    pub text: String,
    pub response_type: String,
}

impl Response {
    pub fn builder<T>(text: T) -> ResponseBuilder
        where T: Into<String>
    {
        ResponseBuilder::new(text)
    }
}

#[derive(Default)]
pub struct ResponseBuilder {
    text: String,
    response_type: String,
}

impl ResponseBuilder {
    /// constructs a new reponse builder, by default with
    /// the text of an `ephemeral` response
    pub fn new<T>(text: T) -> ResponseBuilder
        where T: Into<String>
    {
        ResponseBuilder {
            text: text.into(),
            response_type: "ephemeral".to_owned(),
        }
    }

    pub fn ephemeral(&mut self) -> &mut ResponseBuilder {
        self.response_type = "ephemeral".to_owned();
        self
    }

    pub fn in_channel(&mut self) -> &mut ResponseBuilder {
        self.response_type = "in_channel".to_owned();
        self
    }

    pub fn build(&self) -> Response {
        Response {
            text: self.text.clone(),
            response_type: self.response_type.clone(),
        }
    }
}
